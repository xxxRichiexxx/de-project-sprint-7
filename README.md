# Проект 7-го спринта
### Задание
В продукт планируют внедрить систему рекомендации друзей. Приложение будет предлагать пользователю написать человеку, если пользователь и адресат:
* состоят в одном канале,
* раньше никогда не переписывались,
* находятся не дальше 1 км друг от друга.

При этом команда хочет лучше изучить аудиторию соцсети, чтобы в будущем запустить монетизацию. Для этого было решено провести геоаналитику:
* Выяснить, где находится большинство пользователей по количеству сообщений, лайков и подписок из одной точки.
* Посмотреть, в какой точке Австралии регистрируется больше всего новых пользователей.
* Определить, как часто пользователи путешествуют и какие города выбирают.

таблица событий находится в HDFS по этому пути: /user/master/data/geo/events.
Координаты городов Австралии, которые аналитики собрали в одну таблицу, находятся в файле geo.csv. 

Необходимо создать три витрины:
Витрина 1
* user_id — идентификатор пользователя.
* act_city — актуальный адрес. Это город, из которого было отправлено последнее сообщение.
* home_city — домашний адрес. Это последний город, в котором пользователь был дольше 27 дней.
* travel_count — количество посещённых городов. Если пользователь побывал в каком-то городе повторно, то это считается за отдельное посещение.
* travel_array — список городов в порядке посещения.
* local_time - местное время

Витрина 2
* month — месяц расчёта;
* week — неделя расчёта;
* zone_id — идентификатор зоны (города);
* week_message — количество сообщений за неделю;
* week_reaction — количество реакций за неделю;
* week_subscription — количество подписок за неделю;
* week_user — количество регистраций за неделю;
* month_message — количество сообщений за месяц;
* month_reaction — количество реакций за месяц;
* month_subscription — количество подписок за месяц;
* month_user — количество регистраций за месяц.

Витрина 3(рекомендации друзей):
* user_left — первый пользователь;
* user_right — второй пользователь;
* processed_dttm — дата расчёта витрины;
* zone_id — идентификатор зоны (города);
* local_time — локальное время.

### Как запустить контейнер

1. Скопируйте репозиторий на свой компьютер. В качестве пароля укажите ваш `Access Token`, который нужно получить на странице [Personal Access Tokens](https://github.com/settings/tokens)):
	* `git clone https://github.com/{{ username }}/de-project-sprint-7.git`
2. Перейдите в директорию с проектом: 
	* `cd de-project-sprint-7`
3. Выполните проект и сохраните получившийся код в локальном репозитории:
	* `git add .`
	* `git commit -m 'my best commit'`
4. Обновите репозиторий в вашем GutHub-аккаунте:
	* `git push origin main`

### Структура репозитория

Внутри `src` расположены две папки:
- `/src/dags`;
- `/src/scripts`.
